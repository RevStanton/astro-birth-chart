<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Natal Chart — Free Astrology API (Lite Mode)</title>
  <link rel="stylesheet" href="./styles.css"/>
</head>
<body>
  <main>
    <h1>Natal Chart</h1>

    <div class="controls">
      <label><input type="checkbox" id="show-minor-aspects"> Show minor aspects</label>
      <label><input type="checkbox" id="show-asteroids" checked> Show asteroids/points</label>
    </div>

    <form id="natal-form">
      <fieldset>
        <legend>Birth Data</legend>
        <div class="grid">
          <label> Date
            <input type="date" name="date_iso" required />
          </label>
          <label> Time (24h)
            <input type="time" name="time_hm" step="60" required />
          </label>
          <label> Seconds
            <input type="number" name="seconds" min="0" max="59" value="0" required />
          </label>
          <label> Latitude
            <input type="number" step="0.0001" name="latitude" placeholder="39.7684" required />
          </label>
          <label> Longitude
            <input type="number" step="0.0001" name="longitude" placeholder="-86.1581" required />
          </label>
          <label> Timezone (e.g. -5, 5.5)
            <input type="number" step="0.25" name="timezone" placeholder="-5" required />
          </label>
        </div>
      </fieldset>

      <fieldset>
        <legend>Config</legend>
        <div class="grid">
          <label> Observation Point
            <select name="observation_point">
              <option value="topocentric" selected>topocentric</option>
              <option value="geocentric">geocentric</option>
            </select>
          </label>
          <label> Ayanamsha
            <select name="ayanamsha">
              <option value="tropical" selected>tropical</option>
              <option value="sayana">sayana</option>
              <option value="lahiri">lahiri</option>
            </select>
          </label>
          <label> Language
            <select name="language">
              <option value="en" selected>en</option>
              <option value="es">es</option><option value="fr">fr</option><option value="pt">pt</option>
              <option value="ru">ru</option><option value="de">de</option><option value="ja">ja</option>
              <option value="pl">pl</option><option value="tr">tr</option>
            </select>
          </label>
          <label> House System (Lite = Whole Sign)
            <select name="house_system" disabled>
              <option>Whole Signs (Lite)</option>
            </select>
          </label>
        </div>
      </fieldset>

      <details class="advanced">
        <summary>Advanced (optional) — filters & colors</summary>
        <div class="grid">
          <label>Exclude Planets (CSV)
            <input type="text" name="exclude_planets" placeholder='Lilith,Chiron'/>
          </label>
          <label>Allowed Aspects (CSV)
            <input type="text" name="allowed_aspects" placeholder='Conjunction,Trine'/>
          </label>
          <label>Orb Values (JSON)
            <textarea name="orb_values" rows="3" placeholder='{"Conjunction":3,"Opposition":5,"Square":5,"Trine":5}'></textarea>
          </label>
        </div>
      </details>

      <label class="lite-toggle">
        <input type="checkbox" name="lite_mode" checked />
        <span>Lite mode (use only /western/planets; compute houses/aspects locally)</span>
      </label>

      <button type="submit">Generate</button>
    </form>

    <section id="results" class="hidden">
      <div class="panel">
        <canvas id="wheel" width="520" height="520"></canvas>
        <div id="tooltip" class="tooltip" hidden></div>
        <div class="legend">
          <div><span class="leg conj"></span> Conjunction</div>
          <div><span class="leg trine"></span> Trine</div>
          <div><span class="leg square"></span> Square</div>
          <div><span class="leg sextile"></span> Sextile</div>
          <div><span class="leg opp"></span> Opposition</div>
        </div>
      </div>

      <div class="tables">
        <div>
          <h2>Planets</h2>
          <table id="planets-table"></table>
        </div>
        <div>
          <h2>Houses (Whole Sign)</h2>
          <table id="houses-table"></table>
        </div>
        <div>
          <h2>Aspects (Local)</h2>
          <table id="aspects-table"></table>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="./app.js"></script>
</body>
</html>
